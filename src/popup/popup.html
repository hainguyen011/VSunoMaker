<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suno Hit-Maker AI</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Syncopate:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="popup.css">
</head>

<body>
    <div class="studio-container">
        <header>
            <div class="logo">VSUNO<span>Maker</span></div>
            <div class="pulse-indicator"></div>
        </header>

        <nav class="tab-bar">
            <button class="tab-btn active" data-tab="compose">S√°ng t√°c</button>
            <button class="tab-btn" data-tab="studio">Studio</button>
            <button class="tab-btn" data-tab="history">L·ªãch s·ª≠</button>
            <button class="tab-btn" data-tab="settings">C√†i ƒë·∫∑t</button>
        </nav>

        <main>
            <!-- TAB: COMPOSE -->
            <div id="tab-compose" class="tab-content active">
                <div class="input-panel">
                    <!-- Compose Control Card -->
                    <div class="compose-control-card">
                        <div class="mode-segmented-control">
                            <div class="segmented-slider"></div>
                            <button class="seg-btn active" data-mode="concept" id="seg-btn-concept">√ù T∆Ø·ªûNG</button>
                            <button class="seg-btn" data-mode="lyrics" id="seg-btn-lyrics">L·ªúI NH·∫†C</button>
                            <!-- Hidden toggle for compatibility -->
                            <input type="checkbox" id="input-mode-toggle" style="display: none;">
                        </div>

                        <div class="pro-toggle-wrapper">
                            <span class="pro-toggle-label">INSTRUMENTAL</span>
                            <label class="pro-switch">
                                <input type="checkbox" id="instrumental-mode">
                                <span class="pro-slider"></span>
                            </label>
                        </div>
                    </div>

                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <label style="margin-bottom: 0;" id="input-label">√ù T∆Ø·ªûNG (CONCEPT)</label>
                        <div class="inspector-tools">
                            <button class="icon-btn" id="magic-polish" title="‚ú® S·ª≠a l·ªùi v·∫ßn ƒëi·ªáu (Magic Polish)">‚ú®
                                P</button>
                            <button class="icon-btn" id="inspect-lyrics" title="Scan v√πng Lyrics">Lyrics</button>
                            <button class="icon-btn" id="inspect-style" title="Scan v√πng Style">Styles</button>
                        </div>
                    </div>
                    <textarea id="lyrics-input"
                        placeholder="V√≠ d·ª•: M·ªôt b√†i ballad V-pop t√¢m tr·∫°ng, n√≥i v·ªÅ s·ª± nu·ªëi ti·∫øc trong nh·ªØng ƒë√™m m∆∞a..."
                        style="text-align: left; min-height: 350px;"></textarea>

                    <label>NGH·ªÜ Sƒ® TRUY·ªÄN C·∫¢M H·ª®NG</label>
                    <input type="text" id="artist-input" placeholder="V√≠ d·ª•: S∆°n T√πng M-TP..."
                        style="color: white; margin-bottom: 20px; ">

                    <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                        <div style="flex: 1;">
                            <label>GI·ªöI T√çNH (VOCAL)</label>
                            <select id="vocal-gender"
                                style="width: 100%; padding: 10px; background: var(--panel); border: 1px solid var(--border); border-radius: 8px; color: white; font-size: 0.85rem; outline: none;">
                                <option value="Random">Ng·∫´u nhi√™n</option>
                                <option value="Male Vocals">Nam (Male)</option>
                                <option value="Female Vocals">N·ªØ (Female)</option>
                                <option value="Duet Vocals">Song ca (Duet)</option>
                            </select>
                        </div>
                        <div style="flex: 1;">
                            <label>V√ôNG MI·ªÄN</label>
                            <select id="vocal-region"
                                style="width: 100%; padding: 10px; background: var(--panel); border: 1px solid var(--border); border-radius: 8px; color: white; font-size: 0.85rem; outline: none;">
                                <option value="Standard">Chu·∫©n</option>
                                <option value="Northern">Mi·ªÅn B·∫Øc</option>
                                <option value="Central">Mi·ªÅn Trung</option>
                                <option value="Southern">Mi·ªÅn Nam</option>
                            </select>
                        </div>
                    </div>

                    <div class="vibe-selector">
                        <div class="vibe-chip active" data-vibe="V-Pop Viral">V-Pop Viral</div>
                        <div class="vibe-chip" data-vibe="Indie Chill">Indie Chill</div>
                        <div class="vibe-chip" data-vibe="Vinahouse Hit">Vinahouse</div>
                        <div class="vibe-chip" data-vibe="US-UK Modern">US-UK Pop</div>
                        <div class="vibe-chip" data-vibe="K-Pop Star">K-Pop</div>
                        <div class="vibe-chip" data-vibe="Lofi HipHop">Lo-fi</div>
                        <div class="vibe-chip" data-vibe="EDM Festival">EDM</div>
                        <div class="vibe-chip" data-vibe="Rock Ballad">Rock</div>
                    </div>

                    <div class="input-panel custom-vibe-panel">
                        <label>VIBE T√ôY CH·ªàNH (CUSTOM)</label>
                        <input type="text" id="custom-vibe-input" placeholder="V√≠ d·ª•: Bolero, Jazz, Funk...">
                    </div>
                </div>

                <div class="action-zone">
                    <button id="compose-btn" class="glow-button">
                        T·∫†O HIT NGAY
                    </button>
                </div>
            </div>

            <!-- TAB: HISTORY -->
            <div id="tab-history" class="tab-content">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid var(--border);">
                    <label style="margin: 0;">L·ªäCH S·ª¨ G·∫¶N ƒê√ÇY</label>
                    <button class="icon-btn clear-btn" id="btn-clear-history"
                        style="font-size: 0.65rem; padding: 4px 10px;">X√ìA T·∫§T C·∫¢</button>
                </div>
                <div class="history-list" id="history-container">
                    <div class="empty-state">Ch∆∞a c√≥ l·ªãch s·ª≠ s√°ng t√°c.</div>
                </div>
            </div>

            <!-- TAB: SETTINGS -->
            <div id="tab-settings" class="tab-content">
                <div class="input-panel" style="margin-bottom: 12px;">
                    <label>GEMINI API KEY</label>
                    <input type="password" id="api-key" placeholder="Nh·∫≠p API Key c·ªßa b·∫°n..."
                        style="width: 100%; padding: 8px; background: var(--panel); border: 1px solid var(--border); border-radius: 4px; color: white; margin-bottom: 0; font-size: 0.7rem;">
                </div>

                <div class="input-panel">
                    <label>PHI√äN B·∫¢N M√î H√åNH (MODEL)</label>
                    <select id="gemini-model"
                        style="width: 100%; padding: 10px; background: var(--panel); border: 1px solid var(--border); border-radius: 8px; color: white; font-size: 0.85rem; outline: none;">
                        <option value="gemini-1.5-flash">Gemini 1.5 Flash (·ªîn ƒë·ªãnh)</option>
                        <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
                        <option value="gemini-2.0-flash-exp" selected>Gemini 2.0 Flash (M·∫∑c ƒë·ªãnh)</option>
                        <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                        <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
                        <option value="gemini-3.0-flash">Gemini 3.0 Flash</option>
                        <option value="gemini-3.0-pro">Gemini 3.0 Pro</option>
                    </select>
                </div>

                <div class="settings-footer">
                    <small>Version 1.2 - Pro</small>
                </div>
            </div>

            <!-- TAB: STUDIO (Previously Advanced) -->
            <div id="tab-studio" class="tab-content">
                <!-- Sub-tab Navigation -->
                <div class="sub-tab-bar">
                    <button class="sub-tab-btn active" data-subtab="basic">C∆† B·∫¢N</button>
                    <button class="sub-tab-btn" data-subtab="pro">N√ÇNG CAO (PRO)</button>
                </div>

                <!-- 1. STUDIO BASIC CONTENT -->
                <div id="studio-basic-content" class="sub-tab-content active">
                    <!-- 1.1. Custom Persona -->
                    <div class="studio-accordion expanded">
                        <div class="accordion-header">
                            <label>NH√ÇN C√ÅCH AI (PERSONA)</label>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="accordion-body">
                            <p class="feature-intro">T√πy ch·ªânh vai tr√≤ v√† phong c√°ch s√°ng t√°c ri√™ng cho AI.</p>
                            <textarea id="custom-system-prompt"
                                placeholder="V√≠ d·ª•: B·∫°n l√† Hit-Maker chuy√™n d√≤ng nh·∫°c Vinahouse..."
                                style="min-height: 80px; font-size: 0.75rem; margin: 0;"></textarea>
                        </div>
                    </div>

                    <!-- 1.2. Structure Builder -->
                    <div class="studio-accordion expanded">
                        <div class="accordion-header">
                            <label>C·∫§U TR√öC (STRUCTURE)</label>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="accordion-body">
                            <p class="feature-intro">S·∫Øp x·∫øp c·∫•u tr√∫c c√°c ph·∫ßn (Intro, Verse, Chorus...) c·ªßa b√†i h√°t.
                            </p>
                            <div id="structure-display" class="structure-display">
                                <span class="placeholder-text">Ch∆∞a ch·ªçn...</span>
                            </div>
                            <div class="structure-controls">
                                <button class="struct-btn" data-part="Intro">Intro</button>
                                <button class="struct-btn" data-part="Verse">Verse</button>
                                <button class="struct-btn" data-part="Chorus">Chorus</button>
                                <button class="struct-btn" data-part="Bridge">Bridge</button>
                                <button class="struct-btn" data-part="Drop">Drop</button>
                                <button class="struct-btn" data-part="Outro">End</button>
                                <button class="struct-btn clear-btn" id="clear-structure">√ó</button>
                            </div>
                        </div>
                    </div>

                    <!-- 1.3. See The Sound (Image to Music) -->
                    <div class="studio-accordion">
                        <div class="accordion-header">
                            <label>SEE THE SOUND (NH√åN L√Ä NGHE)</label>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="accordion-body">
                            <p class="feature-intro">Ph√¢n t√≠ch h√¨nh ·∫£nh ƒë·ªÉ g·ª£i √Ω √Ω t∆∞·ªüng v√† phong c√°ch √¢m nh·∫°c.</p>
                            <div class="image-upload-box" id="image-upload-box">
                                <span id="image-upload-text">K√©o th·∫£ ho·∫∑c Click ƒë·ªÉ t·∫£i ·∫£nh</span>
                                <input type="file" id="image-input" accept="image/*" style="display: none;">
                            </div>
                            <div id="image-preview-container" class="image-preview-box" style="display: none;">
                                <img id="image-preview" src="" alt="Preview">
                                <button id="btn-remove-image" class="remove-img-btn">√ó</button>
                            </div>

                            <!-- Suggestions Result Box -->
                            <div id="sts-result-box" class="suggestion-box" style="display: none;">
                                <div class="suggestion-content">
                                    <div class="suggestion-item">
                                        <span class="suggestion-label">CONCEPT:</span>
                                        <p id="sts-concept-text">...</p>
                                    </div>
                                    <div class="suggestion-item">
                                        <span class="suggestion-label">VIBE:</span>
                                        <p id="sts-vibe-text">...</p>
                                    </div>
                                </div>
                                <button id="btn-apply-sts" class="action-btn">S√ÅNG T√ÅC V·ªöI √ù T∆Ø·ªûNG N√ÄY</button>
                            </div>
                        </div>
                    </div>

                    <!-- 1.4. Style Fusion -->
                    <div class="studio-accordion">
                        <div class="accordion-header">
                            <label>STYLE FUSION (LAI T·∫†O)</label>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="accordion-body">
                            <p class="feature-intro">H√≤a tr·ªôn hai th·ªÉ lo·∫°i nh·∫°c ƒë·ªÉ t·∫°o ra phong c√°ch ƒë·ªôc b·∫£n.</p>
                            <div style="display: flex; gap: 6px; margin-bottom: 8px;">
                                <input type="text" id="style-a" placeholder="Style 1 (V-Pop)"
                                    style="flex: 1; font-size: 0.75rem;">
                                <input type="text" id="style-b" placeholder="Style 2 (Jazz)"
                                    style="flex: 1; font-size: 0.75rem;">
                            </div>
                            <button class="action-btn" id="btn-fuse-style">LAI T·∫†O STYLE</button>
                        </div>
                    </div>

                    <!-- 1.5. Clone The Vibe -->
                    <div class="studio-accordion">
                        <div class="accordion-header">
                            <label>CLONE THE VIBE (SAO CH√âP)</label>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="accordion-body">
                            <p class="feature-intro">T√¨m ki·∫øm vibes t·ª´ b√†i h√°t y√™u th√≠ch c·ªßa b·∫°n</p>
                            <textarea id="clone-input" placeholder="D√°n l·ªùi b√†i h√°t ho·∫∑c m√¥ t·∫£ b√†i h√°t g·ªëc..."
                                style="min-height: 80px; font-size: 0.75rem; margin-bottom: 8px;"></textarea>
                            <button class="action-btn" id="btn-clone-vibe" style="margin-bottom: 12px;">D·ªäCH NG∆Ø·ª¢C
                                STYLE</button>

                            <div id="clone-result-box" class="result-box" style="display: none;">
                                <div class="result-header">K·∫æT QU·∫¢ GI·∫¢I M√É:</div>
                                <div id="clone-result-text" class="result-text"></div>
                                <div class="result-actions">
                                    <button class="mini-btn" id="btn-copy-clone">Sao ch√©p</button>
                                    <button class="mini-btn success" id="btn-apply-clone">D√πng s√°ng t√°c</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. STUDIO PRO (ADVANCED) CONTENT -->
                <div id="studio-pro-content" class="sub-tab-content">
                    <!-- 2.1. Vocal Lab -->
                    <div class="studio-accordion">
                        <div class="accordion-header">
                            <label>üéôÔ∏è VOCAL LAB (PH√íNG THU)</label>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="accordion-body">
                            <p class="feature-intro">ƒêi·ªÅu ch·ªânh ƒë·∫∑c t√≠nh v√† hi·ªáu ·ª©ng gi·ªçng h√°t chuy√™n s√¢u.</p>

                            <div class="pro-group">
                                <span class="pro-label">ƒê·∫∂C TR∆ØNG GI·ªåNG</span>
                                <div class="pro-grid-3" id="vocal-traits">
                                    <div class="pro-chip" data-val="Bright">S√°ng</div>
                                    <div class="pro-chip" data-val="Deep">Tr·∫ßm</div>
                                    <div class="pro-chip" data-val="Husky">Kh√†n</div>
                                    <div class="pro-chip" data-val="Soft">Nh·∫π</div>
                                    <div class="pro-chip" data-val="Powerful">M·∫°nh</div>
                                    <div class="pro-chip" data-val="Vibrant">Rung</div>
                                </div>
                            </div>

                            <div class="pro-group">
                                <span class="pro-label">HI·ªÜU ·ª®NG (PRESETS)</span>
                                <div class="pro-grid" id="vocal-presets">
                                    <div class="pro-chip" data-val="Studio recording">Studio</div>
                                    <div class="pro-chip" data-val="Live concert">Live</div>
                                    <div class="pro-chip" data-val="Auto-tune">Auto-tune</div>
                                    <div class="pro-chip" data-val="Lo-fi">Lo-fi</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2.2. Emotion Map -->
                    <div class="studio-accordion">
                        <div class="accordion-header">
                            <label>üé≠ EMOTION MAP (C·∫¢M X√öC)</label>
                            <div class="accordion-icon">‚ñº</div>
                        </div>
                        <div class="accordion-body">
                            <p class="feature-intro">Ch·ªçn c·∫£m x√∫c ch·ªß ƒë·∫°o ƒë·ªÉ AI ƒëi·ªÅu ch·ªânh giai ƒëi·ªáu.</p>
                            <div class="pro-grid-3" id="emotion-chips">
                                <div class="pro-chip" data-val="Epic & Dramatic">K·ªãch t√≠nh</div>
                                <div class="pro-chip" data-val="Happy & Uplifting">H·∫°nh ph√∫c</div>
                                <div class="pro-chip" data-val="Sad & Melancholic">U s·∫ßu</div>
                                <div class="pro-chip" data-val="Chill & Relaxing">B√¨nh y√™n</div>
                                <div class="pro-chip" data-val="Dark & Aggressive">Gi·∫≠n d·ªØ</div>
                                <div class="pro-chip" data-val="Mysterious">B√≠ ·∫©n</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Fixed Global Status Log -->
        <div id="status-log-container" class="log-overlay">
            <div class="floating-log-card">
                <div class="log-scanline"></div>
                <div class="log-header">
                    <span class="log-badge">SYSTEM COMMAND CENTER</span>
                    <div class="log-dots"><span></span><span></span><span></span></div>
                </div>
                <div id="status-log" class="floating-log"></div>
            </div>
        </div>

        <footer>
            <span>AI MUSIC ENGINE v1.0</span>
            <span id="ai-status">ONLINE</span>
        </footer>
    </div>
    <script src="popup.js"></script>
</body>

</html>